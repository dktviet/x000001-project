/* Cai nay de query cho mot cau lenh sql tu viet (neu a chua co) */
function query($sql){
    global $conn;
    if ($sql == '') return false;
    $result_array = array();
	$result = mysql_query($sql,$conn);
	if($result){
		while($row=mysql_fetch_assoc($result)){
			$result_array[] = $row;
		}
	}
	return $result_array;
}
/* Ham de lay ra thuoc tinh */
function product_properties($product_id){
		/* 	
			ten bang e dang de dang class
			a nen dat ten bang theo config cho de thay doi
			e ko de ten bang co dinh o trong nay vi co the minh phai thay prefix
		*/
        $sql = 'SELECT (SELECT name FROM ' . tbl_config::tbl_category . ' WHERE id = prop.parent_id) cat, prop.name name
                FROM ' . tbl_config::tbl_properties . ' prop INNER JOIN ' . tbl_config::tbl_product_extend . ' ext
                ON ext.properties_id = prop.id WHERE ext.product_id = ' . $product_id;
        $properties = query($sql);
        if(!$properties){
                return 'Chua co thuoc tinh nao!';
        }
        return $properties;
}
/* Cai nay de lay ra ne: */
$properties = product_properties(product_id);
foreach($properties as $prop){
	echo $prop['cat'] . ': ' . $prop['name'] . ' <br>';
}
